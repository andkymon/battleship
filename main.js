(()=>{"use strict";var e={208:(e,n,t)=>{t.d(n,{A:()=>s});var r=t(354),o=t.n(r),a=t(314),i=t.n(a)()(o());i.push([e.id,"/*\nJosh's Custom CSS Reset\nhttps://www.joshwcomeau.com/css/custom-css-reset/\n*/\n*, *::before, *::after {\n    box-sizing: border-box;\n}\n* {\n    margin: 0;\n}\nbody {\n    line-height: 1.5;\n    -webkit-font-smoothing: antialiased;\n}\nimg, picture, video, canvas, svg {\n    display: inline-block;\n    max-width: 100%;\n}\ninput, button, textarea, select {\n    font: inherit;\n}\np, h1, h2, h3, h4, h5, h6 {\n    overflow-wrap: break-word;\n    hyphens: auto;\n}\np {\n    text-wrap: pretty;\n}\nh1, h2, h3, h4, h5, h6 {\n    text-wrap: balance;\n}\nbutton {\n    line-height: 1;\n}\nbutton:hover {\n    cursor: pointer;\n}\n\nbody {\n    height: 100vh;\n}\n\nh1 {\n    text-align: center;\n    font-size: 3rem;\n}\n\n#game-message {\n    text-align: center;\n    font-size: 2rem;\n}\n\n.grid-wrapper {\n    display: flex;\n    align-items: center;\n    flex-direction: column;\n}\n\n.grid {\n    height: 402px;\n    width: 402px;\n    border: 1px solid black;\n    display: grid;\n    grid-template-columns: repeat(10, 1fr);\n    grid-template-rows: repeat(10, 1fr);\n}\n\n.grid-square {\n    border: 1px solid black;\n}\n\n.direction {\n    text-align: center;\n}\n\n.clicked {\n    background-color: green;\n}\n\n.hovered {\n    background-color: blue;\n}\n\n#battle-page {\n    display: none; /* Enabled after ship placement is done */\n    flex-wrap: wrap;\n    justify-content: center;\n    gap: 32px;\n}\n\n.computer.grid-square:hover {\n    filter: brightness(75%);\n}\n\n.computer.grid.disabled {\n    pointer-events: none;\n    opacity: 0.5;\n}\n\n#win-page {\n    display: none;\n    flex-direction: column;\n    align-items: center;\n}","",{version:3,sources:["webpack://./src/style.css"],names:[],mappings:"AAAA;;;CAGC;AACD;IACI,sBAAsB;AAC1B;AACA;IACI,SAAS;AACb;AACA;IACI,gBAAgB;IAChB,mCAAmC;AACvC;AACA;IACI,qBAAqB;IACrB,eAAe;AACnB;AACA;IACI,aAAa;AACjB;AACA;IACI,yBAAyB;IACzB,aAAa;AACjB;AACA;IACI,iBAAiB;AACrB;AACA;IACI,kBAAkB;AACtB;AACA;IACI,cAAc;AAClB;AACA;IACI,eAAe;AACnB;;AAEA;IACI,aAAa;AACjB;;AAEA;IACI,kBAAkB;IAClB,eAAe;AACnB;;AAEA;IACI,kBAAkB;IAClB,eAAe;AACnB;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,sBAAsB;AAC1B;;AAEA;IACI,aAAa;IACb,YAAY;IACZ,uBAAuB;IACvB,aAAa;IACb,sCAAsC;IACtC,mCAAmC;AACvC;;AAEA;IACI,uBAAuB;AAC3B;;AAEA;IACI,kBAAkB;AACtB;;AAEA;IACI,uBAAuB;AAC3B;;AAEA;IACI,sBAAsB;AAC1B;;AAEA;IACI,aAAa,EAAE,yCAAyC;IACxD,eAAe;IACf,uBAAuB;IACvB,SAAS;AACb;;AAEA;IACI,uBAAuB;AAC3B;;AAEA;IACI,oBAAoB;IACpB,YAAY;AAChB;;AAEA;IACI,aAAa;IACb,sBAAsB;IACtB,mBAAmB;AACvB",sourcesContent:["/*\nJosh's Custom CSS Reset\nhttps://www.joshwcomeau.com/css/custom-css-reset/\n*/\n*, *::before, *::after {\n    box-sizing: border-box;\n}\n* {\n    margin: 0;\n}\nbody {\n    line-height: 1.5;\n    -webkit-font-smoothing: antialiased;\n}\nimg, picture, video, canvas, svg {\n    display: inline-block;\n    max-width: 100%;\n}\ninput, button, textarea, select {\n    font: inherit;\n}\np, h1, h2, h3, h4, h5, h6 {\n    overflow-wrap: break-word;\n    hyphens: auto;\n}\np {\n    text-wrap: pretty;\n}\nh1, h2, h3, h4, h5, h6 {\n    text-wrap: balance;\n}\nbutton {\n    line-height: 1;\n}\nbutton:hover {\n    cursor: pointer;\n}\n\nbody {\n    height: 100vh;\n}\n\nh1 {\n    text-align: center;\n    font-size: 3rem;\n}\n\n#game-message {\n    text-align: center;\n    font-size: 2rem;\n}\n\n.grid-wrapper {\n    display: flex;\n    align-items: center;\n    flex-direction: column;\n}\n\n.grid {\n    height: 402px;\n    width: 402px;\n    border: 1px solid black;\n    display: grid;\n    grid-template-columns: repeat(10, 1fr);\n    grid-template-rows: repeat(10, 1fr);\n}\n\n.grid-square {\n    border: 1px solid black;\n}\n\n.direction {\n    text-align: center;\n}\n\n.clicked {\n    background-color: green;\n}\n\n.hovered {\n    background-color: blue;\n}\n\n#battle-page {\n    display: none; /* Enabled after ship placement is done */\n    flex-wrap: wrap;\n    justify-content: center;\n    gap: 32px;\n}\n\n.computer.grid-square:hover {\n    filter: brightness(75%);\n}\n\n.computer.grid.disabled {\n    pointer-events: none;\n    opacity: 0.5;\n}\n\n#win-page {\n    display: none;\n    flex-direction: column;\n    align-items: center;\n}"],sourceRoot:""}]);const s=i},314:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t="",r=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),r&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),r&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t})).join("")},n.i=function(e,t,r,o,a){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(i[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);r&&i[d[0]]||(void 0!==a&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=a),t&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=t):d[2]=t),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),n.push(d))}},n}},354:e=>{e.exports=function(e){var n=e[1],t=e[3];if(!t)return n;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),a="/*# ".concat(o," */");return[n].concat([a]).join("\n")}return[n].join("\n")}},72:e=>{var n=[];function t(e){for(var t=-1,r=0;r<n.length;r++)if(n[r].identifier===e){t=r;break}return t}function r(e,r){for(var a={},i=[],s=0;s<e.length;s++){var c=e[s],l=r.base?c[0]+r.base:c[0],d=a[l]||0,u="".concat(l," ").concat(d);a[l]=d+1;var A=t(u),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==A)n[A].references++,n[A].updater(p);else{var h=o(p,r);r.byIndex=s,n.splice(s,0,{identifier:u,updater:h,references:1})}i.push(u)}return i}function o(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,o){var a=r(e=e||[],o=o||{});return function(e){e=e||[];for(var i=0;i<a.length;i++){var s=t(a[i]);n[s].references--}for(var c=r(e,o),l=0;l<a.length;l++){var d=t(a[l]);0===n[d].references&&(n[d].updater(),n.splice(d,1))}a=c}}},659:e=>{var n={};e.exports=function(e,t){var r=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},540:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},56:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var o=void 0!==t.layer;o&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,o&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var a=t.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),n.styleTagTransform(r,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},113:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}}},n={};function t(r){var o=n[r];if(void 0!==o)return o.exports;var a=n[r]={id:r,exports:{}};return e[r](a,a.exports,t),a.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.nc=void 0;var r=t(72),o=t.n(r),a=t(825),i=t.n(a),s=t(659),c=t.n(s),l=t(56),d=t.n(l),u=t(540),A=t.n(u),p=t(113),h=t.n(p),f=t(208),m={};m.styleTagTransform=h(),m.setAttributes=d(),m.insert=c().bind(null,"head"),m.domAPI=i(),m.insertStyleElement=A(),o()(f.A,m),f.A&&f.A.locals&&f.A.locals;class b{constructor(e){if(!0===isNaN(e))throw new Error("Ship length invalid.");this.length=e,this.hitCounter=0}hit(){this.hitCounter++}get isSunk(){return!(this.hitCounter<this.length)}}function g(e,n){return e>=0&&e<=9&&n>=0&&n<=9}function C(e,n=e.firstSquareCoordinates[0],t=e.firstSquareCoordinates[1],r=e.isVertical){const o=[];for(let a=-1;a<=e.length;a++)for(let e=-1;e<=1;e++)y(o,r?n+a:n+e,r?t+e:t+a);return o}function y(e,n,t){g(n,t)&&e.push(`${n}${t}`)}class v{constructor(){this.board=new Array(10).fill(null).map((()=>new Array(10).fill(null))),this.ships=[new b(5),new b(4),new b(3),new b(3),new b(2)],this.placedShipsCounter=0}placeShip(e,n,t,r){if(!1===g(r?n+(e.length-1):n,r?t:t+(e.length-1)))return"Out of bounds.";if(!1===this.#e(e,n,t,r))return"Space already occupied.";if(!0===e.isPlaced)return"Ship already placed.";e.isPlaced=!0,this.placedShipsCounter++,e.firstSquareCoordinates=[n,t],e.isVertical=r;for(let o=0;o<e.length;o++)this.board[n][t]=e,r?n++:t++}#e(e,n,t,r){const o=C(e,n,t,r);for(const e of o)if(null!==this.board[e[0]][e[1]])return!1;return!0}receiveAttack(e,n){return this.placedShipsCounter<5?"All ships must be placed before attacking.":!1===g(e,n)?"Out of bounds.":"X"===this.board[e][n]||"O"===this.board[e][n]?"Cell already hit.":void(null===this.board[e][n]?this.board[e][n]="X":(this.board[e][n].hitCounter++,this.board[e][n]="O"))}allShipsSunk(){for(const e of this.ships)if(!1===e.isSunk)return!1;return!0}}class w{constructor(){this.gameboard=new v}}const I=["carrier","battleship","cruiser","submarine","destroyer"];let B,S,x,k;const E=document.querySelector("#game-message"),q=document.querySelector("#ship-placement-page .grid");function L(e){let{row:n,col:t}=e.dataset;n=Number(n),t=Number(t),e.addEventListener("click",(()=>{const e=B.placeShip(x,n,t,k);if(void 0===e)if(function(e,n){const t=k?1:0,r=k?0:1;let o,a,i;for(let s=0;s<x.length;s++)a=e+t*s,i=n+r*s,o=document.querySelector(`[data-row="${a}"][data-col="${i}"]`),o.classList.add("clicked");G()}(n,t),4!==S)S++,E.textContent=`Place your ${I[S]}`,x=B.ships[S];else{!function(){const e=document.querySelectorAll(".grid-square");for(const n of e)n.disabled=!0}();const e=new Event("allShipsPlaced");document.dispatchEvent(e)}else E.textContent=e})),e.addEventListener("mouseenter",(()=>{_(n,t)})),e.addEventListener("mouseleave",(()=>{G()}))}let $,j,O,M,T,N,P,R,z,X,J,U,Y,D,H,F,V=[];function _(e,n){$=e,j=n;const t=k?1:0,r=k?0:1;let o,a,i;for(let s=0;s<x.length;s++){if(a=e+t*s,i=n+r*s,a>9||i>9)return;o=document.querySelector(`[data-row="${a}"][data-col="${i}"]`),o.classList.add("hovered"),V.push(o)}}function G(){for(const e of V)e.classList.remove("hovered");V=[]}function Z(){const e={};for(let n=0;n<100;n++){const t=Math.floor(n/10),r=n%10;e[`${t}${r}`]={row:t,col:r}}return e}function K(e){!function(e){if(null===e||"object"!=typeof e||Array.isArray(e)||"function"==typeof e)throw new Error("Invalid input. selectRandomCoordinates expects an object.")}(e),function(e){if(0===Object.keys(e).length)throw new Error("No available coordinates.")}(e);const n=Object.keys(e),t=n[Math.floor(Math.random()*n.length)];return e[t].key=t,e[t]}function Q(e){switch(X=e,M){case 0:{const e=K(U),{row:n,col:t}=e;T=n,N=t;break}case 1:for(P=O.pop();`${T+P[0]}${N+P[1]}`in U==0;)P=O.pop();T+=P[0],N+=P[1];break;case 2:`${T+P[0]}${N+P[1]}`in U==0?(M=3,T=R,N=z,P[0]*=-1,P[1]*=-1,Q(X)):(T+=P[0],N+=P[1]);break;case 3:`${T+P[0]}${N+P[1]}`in U==0?(function(){const e=C(J);for(const n of e)delete U[n]}(),O=[[-1,0],[0,-1],[1,0],[0,1]],M=0,Q(X)):(T+=P[0],N+=P[1])}null!==X.gameboard.board[T][N]&&"string"!=typeof X.gameboard.board[T][N]&&(J=X.gameboard.board[T][N]);const n=[T,N];return console.log(`${T}${N}`),X.gameboard.receiveAttack(T,N),delete U[`${T}${N}`],function(){switch(M){case 0:"X"===X.gameboard.board[T][N]?M=0:"O"===X.gameboard.board[T][N]&&(M=1,R=T,z=N);break;case 1:"X"===X.gameboard.board[T][N]?(T=R,N=z):"O"===X.gameboard.board[T][N]&&(M=2);break;case 2:"X"===X.gameboard.board[T][N]&&(M=3,T=R,N=z,P[0]*=-1,P[1]*=-1);break;case 3:"X"===X.gameboard.board[T][N]&&(T=null,N=null)}}(),n}function W(e){document.querySelector("#game-message").textContent=e}function ee(e,n){const t=document.createElement("div");return t.classList.add("human","grid-square"),t.setAttribute("data-row",e),t.setAttribute("data-col",n),null!==Y.gameboard.board[e][n]&&t.classList.add("clicked"),t}function ne(e,n){const t=document.createElement("button");return t.classList.add("computer","grid-square"),t.setAttribute("data-row",e),t.setAttribute("data-col",n),t.addEventListener("click",(()=>{!function(e){const{row:n,col:t}=e.dataset,r=D.gameboard.receiveAttack(n,t);if(void 0!==r)return void W(r);if(W(""),te(D,e),!0===D.gameboard.allShipsSunk()){const e=new CustomEvent("gameEnd",{detail:"Human wins."});return void document.dispatchEvent(e)}const o=new Event("computerTurn");document.dispatchEvent(o)}(t)})),t}function te(e,n){const{row:t,col:r}=n.dataset;n.style.backgroundColor="X"===e.gameboard.board[t][r]?"blue":"red"}function re(){H=new w,F=new w,document.querySelector("#win-page").style.display="none",document.querySelector("#ship-placement-page").style.display="block",document.querySelector("#title").style.display="block",document.querySelector("#game-message").style.display="block",B=H.gameboard,S=0,x=B.ships[S],k=!0,E.textContent=`Place your ${I[S]}`,q.replaceChildren(),function(){for(const[e,n]of B.board.entries())for(const t of n.keys()){const n=document.createElement("button");n.classList.add("grid-square"),n.setAttribute("data-row",e),n.setAttribute("data-col",t),L(n),q.appendChild(n)}}()}document.addEventListener("keydown",(e=>{"r"===e.key&&(k=!k,G(),_($,j))})),document.addEventListener("computerTurn",(function(){const e=document.querySelector(".computer.grid");e.classList.add("disabled");const[n,t]=Q(Y),r=document.querySelector(`.human.grid-square[data-row="${n}"][data-col="${t}"]`);if(te(Y,r),e.classList.remove("disabled"),!0!==Y.gameboard.allShipsSunk());else{const e=new CustomEvent("gameEnd",{detail:"Computer wins."});document.dispatchEvent(e)}})),document.addEventListener("allShipsPlaced",(()=>{document.querySelector("#ship-placement-page").style.display="none",document.querySelector("#battle-page").style.display="flex",function(e){let n=0,t=e.gameboard.ships[n];const r=Z();for(;void 0!==t;){let o,a,i=Math.random()<.5,s={...r};do{o=K(s),a=e.gameboard.placeShip(t,o.row,o.col,i),delete s[o.key]}while(void 0!==a);const c=C(t);for(const e of c)delete r[e];n++,t=e.gameboard.ships[n]}}(F),Y=H,D=F,W(""),function(){const e=document.querySelector(".human.grid"),n=document.querySelector(".computer.grid");e.replaceChildren(),n.replaceChildren();for(const[t,r]of Y.gameboard.board.entries())for(const o of r.keys()){const r=ee(t,o);e.appendChild(r);const a=ne(t,o);n.appendChild(a)}}(),O=[[-1,0],[0,-1],[1,0],[0,1]],M=0,T=N=P=X=R=z=J=null,U=Z()})),document.addEventListener("gameEnd",(e=>{document.querySelector("#battle-page").style.display="none",document.querySelector("#title").style.display="none",document.querySelector("#game-message").style.display="none",document.querySelector("#win-page").style.display="flex",document.querySelector("#win-page h1").textContent=e.detail})),document.querySelector("#restart").addEventListener("click",re),re()})();
//# sourceMappingURL=main.js.map